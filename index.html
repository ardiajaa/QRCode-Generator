<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QR Code Generator - Create Beautiful QR Codes Instantly | Free Online Tool</title>
    <meta name="description" content="Free online QR Code Generator. Create beautiful, customizable QR codes instantly. Convert URLs, text, and more into QR codes. Download, share, and save your QR codes easily." />
    <meta name="keywords" content="QR code generator, QR code maker, free QR code, online QR code, QR code creator, QR code scanner, QR code app, QR code tool, QR code design, QR code maker online" />
    <meta name="author" content="ArdiAjaa" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://qr-codee-generate.vercel.app/" />
    <meta property="og:title" content="QR Code Generator - Create Beautiful QR Codes Instantly" />
    <meta property="og:description" content="Free online QR Code Generator. Create beautiful, customizable QR codes instantly. Convert URLs, text, and more into QR codes." />
    <meta property="og:image" content="https://qr-codee-generate.vercel.app/icon.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://qr-codee-generate.vercel.app/" />
    <meta property="twitter:title" content="QR Code Generator - Create Beautiful QR Codes Instantly" />
    <meta property="twitter:description" content="Free online QR Code Generator. Create beautiful, customizable QR codes instantly. Convert URLs, text, and more into QR codes." />
    <meta property="twitter:image" content="https://qr-codee-generate.vercel.app/icon.png" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://qr-codee-generate.vercel.app/" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://qr-codee-generate.vercel.app/icon.png" />
    <link rel="apple-touch-icon" href="https://qr-codee-generate.vercel.app/icon.png" />

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />

    <!-- Fonts and Icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "QR Code Generator",
      "url": "https://qr-codee-generate.vercel.app/",
      "description": "Free online QR Code Generator. Create beautiful, customizable QR codes instantly.",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "ArdiAjaa",
        "url": "https://github.com/ardiajaa"
      }
    }
    </script>
    <style>
      :root {
        --primary-color: #4361ee;
        --secondary-color: #3f37c9;
        --accent-color: #4895ef;
        --light-color: #f8f9fa;
        --dark-color: #212529;
        --success-color: #4bb543;
        --error-color: #ff3333;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--dark-color);
      }

      .container {
        width: 100%;
        max-width: 800px;
        margin: 2rem;
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        animation: fadeIn 0.5s ease-out;
      }

      .header {
        padding: 2rem;
        text-align: center;
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        position: relative;
      }

      .header h1 {
        font-size: 2.2rem;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.8rem;
      }

      .header p {
        opacity: 0.9;
        font-weight: 300;
      }

      .dark-mode-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: white;
      }

      .main-content {
        padding: 2rem;
      }

      .input-group {
        display: flex;
        margin-bottom: 1.5rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .input-group:focus-within {
        box-shadow: 0 5px 20px rgba(67, 97, 238, 0.3);
      }

      .input-group input {
        flex: 1;
        padding: 1rem;
        border: none;
        font-size: 1rem;
        outline: none;
      }

      .input-group button {
        padding: 0 1.5rem;
        border: none;
        background-color: var(--primary-color);
        color: white;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .input-group button:hover {
        background-color: var(--secondary-color);
      }

      .options {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .option-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .option-group label {
        font-weight: 500;
      }

      .option-group select {
        padding: 0.5rem;
        border-radius: 5px;
        border: 1px solid #ddd;
        outline: none;
        cursor: pointer;
      }

      .option-group input[type="color"] {
        width: 30px;
        height: 30px;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        padding: 0;
        background: none;
      }

      .option-group input[type="color"]::-webkit-color-swatch-wrapper {
        padding: 0;
      }

      .option-group input[type="color"]::-webkit-color-swatch {
        border: none;
        border-radius: 50%;
      }

      .option-group input[type="file"] {
        max-width: 150px;
        font-size: 0.9rem;
      }

      .btn-icon {
        background: none;
        border: none;
        color: var(--error-color);
        cursor: pointer;
        padding: 0.3rem;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .btn-icon:hover {
        transform: scale(1.1);
      }

      .logo-preview {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        object-fit: cover;
        margin-left: 0.5rem;
        display: none;
      }

      .result-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
      }

      .qr-container {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 300px;
        position: relative;
        background-color: #f9f9f9;
        border-radius: 10px;
        padding: 2rem;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
      }

      .qr-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        color: #aaa;
        text-align: center;
        position: absolute;
      }

      .qr-placeholder i {
        font-size: 4rem;
        opacity: 0.5;
      }

      .qr-placeholder p {
        font-size: 1.1rem;
      }

      .qr-code {
        max-width: 100%;
        height: auto;
        border: 1px solid #eee;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        opacity: 0;
        transform: scale(0.9);
      }

      .qr-code.show {
        opacity: 1;
        transform: scale(1);
      }

      .actions {
        display: flex;
        gap: 1rem;
        width: 100%;
        justify-content: center;
      }

      .btn {
        padding: 0.8rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .download-btn {
        background-color: var(--primary-color);
        color: white;
      }

      .download-btn:hover {
        background-color: var(--secondary-color);
      }

      .save-btn {
        background-color: var(--light-color);
        color: var(--dark-color);
      }

      .save-btn:hover {
        background-color: #e9ecef;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .footer {
        padding: 1.5rem;
        text-align: center;
        background-color: #f8f9fa;
        color: #6c757d;
      }

      .footer p {
        margin-bottom: 1rem;
      }

      .footer p i {
        color: var(--error-color);
      }

      .footer a {
        text-decoration: none;
        color: inherit;
        transition: color 0.3s ease;
      }

      .footer a:hover {
        color: var(--primary-color);
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1rem;
      }

      .social-links a {
        color: #495057;
        font-size: 1.5rem;
        transition: all 0.3s ease;
        text-decoration: none;
      }

      .social-links a:hover {
        transform: translateY(-3px);
        color: var(--primary-color);
      }

      .toast {
        position: fixed;
        bottom: -100px;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--dark-color);
        color: white;
        padding: 1rem 2rem;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        z-index: 1000;
      }

      .toast.show {
        bottom: 30px;
      }

      .history-section {
        margin-top: 2rem;
        display: none;
      }

      .history-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .history-item {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 8px;
        min-width: 180px;
        max-width: 220px;
        display: flex;
        flex-direction: column;
        align-items: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        position: relative;
      }

      .history-item img {
        width: 100px;
        height: 100px;
        border-radius: 4px;
      }

      .history-item .url {
        font-size: 0.9rem;
        margin: 0.5rem 0;
        word-break: break-all;
      }

      .history-item .timestamp {
        font-size: 0.8rem;
        color: #888;
      }

      .history-item .actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
        width: 100%;
      }

      .history-item .actions button {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.5rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .history-item .actions button.download {
        background: var(--primary-color);
        color: #fff;
      }

      .history-item .actions button.download:hover {
        background: var(--secondary-color);
      }

      .history-item .actions button.delete {
        background: var(--error-color);
        color: #fff;
      }

      .history-item .actions button.delete:hover {
        background: #ff1a1a;
      }

      .history-item .actions button i {
        font-size: 0.9rem;
      }

      .confirm-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .confirm-modal-content {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        text-align: center;
        max-width: 400px;
        width: 90%;
        animation: modalFadeIn 0.3s ease-out;
      }

      .confirm-modal-icon {
        color: #ff4444;
        font-size: 2.5rem;
        margin-bottom: 1rem;
        animation: iconBounce 0.5s ease-in-out;
      }

      .confirm-modal-title {
        margin-bottom: 1rem;
        color: #333;
        font-size: 1.5rem;
        animation: textSlideIn 0.4s ease-out;
      }

      .confirm-modal-text {
        margin-bottom: 1.5rem;
        color: #666;
        line-height: 1.5;
        animation: textFadeIn 0.5s ease-out;
      }

      .confirm-modal-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        animation: buttonSlideUp 0.4s ease-out;
      }

      .confirm-modal-buttons button {
        padding: 0.75rem 2rem;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .confirm-modal-buttons button.confirm {
        background: #ff4444;
      }

      .confirm-modal-buttons button.cancel {
        background: #6c757d;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes modalFadeIn {
        0% { opacity: 0; transform: scale(0.9); }
        100% { opacity: 1; transform: scale(1); }
      }

      @keyframes iconBounce {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
      }

      @keyframes textSlideIn {
        0% { opacity: 0; transform: translateY(-20px); }
        100% { opacity: 1; transform: translateY(0); }
      }

      @keyframes textFadeIn {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }

      @keyframes buttonSlideUp {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .container {
          margin: 1rem;
          width: 95%;
        }

        .header h1 {
          font-size: 1.8rem;
        }

        .header p {
          font-size: 0.9rem;
          padding: 0 1rem;
        }

        .main-content {
          padding: 1rem;
        }

        .input-group {
          flex-direction: column;
          margin-bottom: 1rem;
        }

        .input-group input {
          width: 100%;
          padding: 0.8rem;
          border-radius: 8px 8px 0 0;
        }

        .input-group button {
          width: 100%;
          padding: 0.8rem;
          border-radius: 0 0 8px 8px;
          justify-content: center;
        }

        .options {
          flex-direction: column;
          gap: 1rem;
          padding: 0 0.5rem;
        }

        .option-group {
          width: 100%;
          justify-content: space-between;
        }

        .option-group select {
          width: 60%;
          padding: 0.5rem;
        }

        .qr-container {
          padding: 1rem;
          min-height: 250px;
        }

        .actions {
          flex-direction: column;
          gap: 0.5rem;
          padding: 0 0.5rem;
        }

        .btn {
          width: 100%;
          justify-content: center;
          padding: 0.8rem;
        }

        .history-item {
          width: 100%;
          max-width: none;
        }

        .history-item .actions {
          flex-direction: column;
        }

        .history-item .actions button {
          width: 100%;
          padding: 0.7rem;
        }

        .dark-mode-toggle {
          top: 10px;
          right: 10px;
          font-size: 1.2rem;
        }

        .confirm-modal-content {
          width: 95%;
          padding: 1.5rem;
        }

        .confirm-modal-buttons {
          flex-direction: column;
          gap: 0.5rem;
        }

        .confirm-modal-buttons button {
          width: 100%;
        }

        .social-links {
          gap: 0.8rem;
        }
        
        .social-links a {
          font-size: 1.3rem;
        }
      }

      @media (max-width: 480px) {
        .container {
          margin: 0.5rem;
          width: 98%;
        }

        .header {
          padding: 1.5rem 1rem;
        }

        .header h1 {
          font-size: 1.5rem;
        }

        .qr-container {
          min-height: 200px;
        }

        .qr-placeholder i {
          font-size: 3rem;
        }

        .qr-placeholder p {
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1><i class="fas fa-qrcode"></i> QR Code Generator</h1>
        <p>Convert any URL or text into a beautiful QR code instantly</p>
        <button id="dark-mode-toggle" class="dark-mode-toggle" title="Toggle Dark Mode">
          <i class="fas fa-moon"></i>
        </button>
      </header>

      <main class="main-content">
        <div class="input-section">
          <div class="input-group">
            <input
              type="text"
              id="url-input"
              placeholder="Enter URL or text..."
              autofocus
            />
            <button id="generate-btn" class="btn">
              <span>Generate QR</span>
              <i class="fas fa-bolt"></i>
            </button>
          </div>
          <div class="options">
            <div class="option-group">
              <label for="size">Size:</label>
              <select id="size">
                <option value="150">150x150</option>
                <option value="200" selected>200x200</option>
                <option value="250">250x250</option>
                <option value="300">300x300</option>
              </select>
            </div>
            <div class="option-group">
              <label for="color">Color:</label>
              <input type="color" id="color" value="#000000" />
            </div>
            <div class="option-group">
              <label for="logo">Logo:</label>
              <input type="file" id="logo" accept="image/*" />
              <button id="remove-logo" class="btn-icon" title="Remove Logo" style="display: none;">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="result-section">
          <div class="qr-container">
            <div id="qr-placeholder" class="qr-placeholder">
              <i class="fas fa-qrcode"></i>
              <p>Your QR code will appear here</p>
            </div>
            <canvas id="qr-code" class="qr-code"></canvas>
          </div>
          <div class="actions">
            <button id="download-btn" class="btn download-btn" disabled>
              <i class="fas fa-download"></i> Download
            </button>
            <button id="export-svg-btn" class="btn save-btn" disabled>
              <i class="fas fa-file-code"></i> Export SVG
            </button>
            <button id="export-pdf-btn" class="btn save-btn" disabled>
              <i class="fas fa-file-pdf"></i> Export PDF
            </button>
            <button id="save-btn" class="btn save-btn" disabled>
              <i class="fas fa-bookmark"></i> Save
            </button>
          </div>
        </div>
        <div id="history-section" class="history-section">
          <h3>History QR</h3>
          <div id="history-list" class="history-list"></div>
        </div>
      </main>

      <footer class="footer">
        <p>Made with <i class="fas fa-heart"></i> by <a href="https://github.com/ardiajaa" target="_blank" rel="noopener noreferrer">ArdiAjaa</a></p>
        <div class="social-links">
          <a href="https://github.com/ardiajaa" target="_blank" rel="noopener noreferrer" class="github" title="GitHub">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://linkedin.com/in/putra-ardianto" target="_blank" rel="noopener noreferrer" class="linkedin" title="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="https://instagram.com/ardi.sch.id" target="_blank" rel="noopener noreferrer" class="instagram" title="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://youtube.com/@Arezaja" target="_blank" rel="noopener noreferrer" class="youtube" title="YouTube">
            <i class="fab fa-youtube"></i>
          </a>
        </div>
      </footer>
    </div>

    <div id="toast" class="toast">QR Code saved to history!</div>
    <div id="confirm-modal" class="confirm-modal">
      <div class="confirm-modal-content">
        <div class="confirm-modal-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h3 class="confirm-modal-title">Delete Confirmation</h3>
        <p class="confirm-modal-text">Are you sure you want to delete this QR Code? This action cannot be undone.</p>
        <div class="confirm-modal-buttons">
          <button id="confirm-yes" class="confirm">
            <i class="fas fa-trash"></i> Yes, Delete
          </button>
          <button id="confirm-no" class="cancel">
            <i class="fas fa-times"></i> Cancel
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // DOM Elements
        const urlInput = document.getElementById("url-input");
        const generateBtn = document.getElementById("generate-btn");
        const sizeSelect = document.getElementById("size");
        const colorInput = document.getElementById("color");
        const qrCodeCanvas = document.getElementById("qr-code");
        const qrPlaceholder = document.getElementById("qr-placeholder");
        const downloadBtn = document.getElementById("download-btn");
        const saveBtn = document.getElementById("save-btn");
        const toast = document.getElementById("toast");
        const exportSvgBtn = document.getElementById("export-svg-btn");
        const exportPdfBtn = document.getElementById("export-pdf-btn");
        const historySection = document.getElementById("history-section");
        const historyList = document.getElementById("history-list");
        const darkModeToggle = document.getElementById("dark-mode-toggle");
        const confirmModal = document.getElementById("confirm-modal");
        const confirmYes = document.getElementById("confirm-yes");
        const confirmNo = document.getElementById("confirm-no");
        const logoInput = document.getElementById("logo");
        const removeLogoBtn = document.getElementById("remove-logo");

        let lastQRData = null; // Untuk SVG/PDF export
        let currentDeleteIndex = null; // Untuk menyimpan index item yang akan dihapus
        let selectedLogo = null;

        // Dark Mode
        function setDarkMode(enabled) {
          if (enabled) {
            document.body.classList.add("dark-mode");
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            localStorage.setItem("darkMode", "1");
          } else {
            document.body.classList.remove("dark-mode");
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            localStorage.setItem("darkMode", "0");
          }
        }
        darkModeToggle.addEventListener("click", function () {
          setDarkMode(!document.body.classList.contains("dark-mode"));
        });
        // Inisialisasi dark mode dari localStorage
        if (localStorage.getItem("darkMode") === "1") setDarkMode(true);

        // Tambahkan CSS dark mode
        const darkStyle = document.createElement('style');
        darkStyle.innerHTML = `
          body.dark-mode {
            background: linear-gradient(135deg, #232526 0%, #414345 100%) !important;
            color: #f8f9fa !important;
          }
          body.dark-mode .container {
            background: #23272f !important;
            color: #f8f9fa !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
          }
          body.dark-mode .header {
            background: linear-gradient(to right, #232526, #414345) !important;
            color: #f8f9fa !important;
          }
          body.dark-mode .input-group input {
            background: #23272f !important;
            color: #f8f9fa !important;
          }
          body.dark-mode .input-group button,
          body.dark-mode .download-btn {
            background: #4895ef !important;
            color: #fff !important;
          }
          body.dark-mode .save-btn {
            background: #343a40 !important;
            color: #f8f9fa !important;
          }
          body.dark-mode .save-btn:hover {
            background: #23272f !important;
          }
          body.dark-mode .qr-container {
            background: #23272f !important;
          }
          body.dark-mode .footer {
            background: #23272f !important;
            color: #aaa !important;
          }
          body.dark-mode .toast {
            background: #343a40 !important;
            color: #fff !important;
          }
          body.dark-mode .option-group label,
          body.dark-mode .option-group select,
          body.dark-mode .option-group input[type="color"] {
            color: #f8f9fa !important;
            background: #23272f !important;
          }
          body.dark-mode .option-group select {
            border-color: #555 !important;
          }
          body.dark-mode .option-group input[type="color"]::-webkit-color-swatch {
            border: 1px solid #555 !important;
          }
          body.dark-mode #history-list div {
            background: #343a40 !important;
            color: #f8f9fa !important;
          }
          body.dark-mode #history-list div button {
            background: #4895ef !important;
            color: #fff !important;
          }
          body.dark-mode #history-list div button:nth-child(2) {
            background: #ff3333 !important;
          }
          body.dark-mode #confirm-modal > div {
            background: #23272f !important;
            color: #f8f9fa !important;
          }
          body.dark-mode #confirm-modal h3 {
            color: #f8f9fa !important;
          }
          body.dark-mode #confirm-modal p {
            color: #aaa !important;
          }
          body.dark-mode #confirm-modal button {
            background: #4895ef !important;
            color: #fff !important;
          }
          body.dark-mode #confirm-modal button:nth-child(2) {
            background: #6c757d !important;
          }
          body.dark-mode #confirm-modal .fa-exclamation-triangle {
            color: #ff4444 !important;
          }
        `;
        document.head.appendChild(darkStyle);

        // Generate QR Code
        generateBtn.addEventListener("click", generateQRCode);
        urlInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") generateQRCode();
        });

        // Handle logo selection
        logoInput.addEventListener("change", function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
              selectedLogo = e.target.result;
              removeLogoBtn.style.display = 'inline-block';
              generateQRCode();
            };
            reader.readAsDataURL(file);
          }
        });

        // Handle logo removal
        removeLogoBtn.addEventListener("click", function() {
          selectedLogo = null;
          logoInput.value = '';
          removeLogoBtn.style.display = 'none';
          generateQRCode();
        });

        function generateQRCode() {
          const url = urlInput.value.trim();
          const size = sizeSelect.value;
          const color = colorInput.value.replace("#", "");

          if (!url) {
            showError("Please enter a URL or text");
            return;
          }

          // Show loading state
          generateBtn.disabled = true;
          generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';

          // Generate QR code
          QRCode.toCanvas(
            qrCodeCanvas,
            url,
            {
              width: parseInt(size),
              color: {
                dark: `#${color}`,
                light: "#ffffff",
              },
              margin: 2,
            },
            function (error) {
              generateBtn.disabled = false;
              generateBtn.innerHTML = '<span>Generate QR</span><i class="fas fa-bolt"></i>';

              if (error) {
                showError("Failed to generate QR code");
                console.error(error);
                return;
              }

              // Add logo if selected
              if (selectedLogo) {
                const ctx = qrCodeCanvas.getContext('2d');
                const logoSize = parseInt(size) * 0.2; // Logo size is 20% of QR code size
                const logoX = (parseInt(size) - logoSize) / 2;
                const logoY = (parseInt(size) - logoSize) / 2;

                // Create a white background for the logo
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(logoX - 2, logoY - 2, logoSize + 4, logoSize + 4);

                // Draw the logo
                const logo = new Image();
                logo.src = selectedLogo;
                logo.onload = function() {
                  ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);
                };
              }

              // Show QR code with animation
              qrPlaceholder.style.display = "none";
              qrCodeCanvas.classList.add("show");

              // Enable buttons
              downloadBtn.disabled = false;
              saveBtn.disabled = false;
              exportSvgBtn.disabled = false;
              exportPdfBtn.disabled = false;

              // Save data for export
              lastQRData = { url, size, color, logo: selectedLogo };
            }
          );
        }

        // Download QR Code
        downloadBtn.addEventListener("click", function () {
          if (qrCodeCanvas.classList.contains("show")) {
            const link = document.createElement("a");
            link.download = "qr-code.png";
            link.href = qrCodeCanvas.toDataURL("image/png");
            link.click();
          }
        });

        // Export SVG
        exportSvgBtn.addEventListener("click", function () {
          if (!lastQRData) return;
          QRCode.toString(
            lastQRData.url,
            {
              type: 'svg',
              width: parseInt(lastQRData.size),
              color: {
                dark: `#${lastQRData.color}`,
                light: "#ffffff",
              },
              margin: 2,
            },
            function (err, svg) {
              if (err) {
                showError("Failed to export SVG");
                return;
              }
              const blob = new Blob([svg], { type: 'image/svg+xml' });
              const link = document.createElement('a');
              link.href = URL.createObjectURL(blob);
              link.download = 'qr-code.svg';
              link.click();
            }
          );
        });

        // Export PDF
        exportPdfBtn.addEventListener("click", function () {
          if (!lastQRData) return;
          const imgData = qrCodeCanvas.toDataURL("image/png");
          const { jsPDF } = window.jspdf;
          const pdf = new jsPDF({ orientation: "p", unit: "pt", format: [parseInt(lastQRData.size)+80, parseInt(lastQRData.size)+120] });
          pdf.setFontSize(20);
          pdf.text("QR Code Generator", 40, 40);
          pdf.setFontSize(12);
          pdf.text("Generated from: " + lastQRData.url, 40, 60);
          pdf.addImage(imgData, "PNG", 40, 80, parseInt(lastQRData.size), parseInt(lastQRData.size));
          pdf.save("qr-code.pdf");
        });

        // Save QR Code (localStorage)
        saveBtn.addEventListener("click", function () {
          if (qrCodeCanvas.classList.contains("show")) {
            const qrData = {
              url: urlInput.value,
              timestamp: new Date().toISOString(),
              image: qrCodeCanvas.toDataURL('image/png'),
              size: sizeSelect.value,
              color: colorInput.value,
              logo: selectedLogo
            };
            let history = JSON.parse(localStorage.getItem('qrHistory') || '[]');
            history.unshift(qrData);
            if (history.length > 20) history = history.slice(0, 20); // Batasi 20 item
            localStorage.setItem('qrHistory', JSON.stringify(history));
            showToast("QR Code saved to history!");
            renderHistory();
          }
        });

        // Render History
        function renderHistory() {
          let history = JSON.parse(localStorage.getItem('qrHistory') || '[]');
          if (history.length === 0) {
            historySection.style.display = 'none';
            return;
          }
          historySection.style.display = 'block';
          historyList.innerHTML = '';
          history.forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = 'history-item';
            div.innerHTML = `
              <img src="${item.image}" alt="QR" />
              <div class="url">${item.url}</div>
              <div class="timestamp">${new Date(item.timestamp).toLocaleString()}</div>
              <div class="actions">
                <button class="download" title="Download"><i class="fas fa-download"></i> Download</button>
                <button class="delete" title="Delete"><i class="fas fa-trash"></i> Delete</button>
              </div>
            `;
            // Download
            div.querySelector('.download').onclick = function() {
              const link = document.createElement('a');
              link.download = 'qr-code.png';
              link.href = item.image;
              link.click();
            };
            // Delete
            div.querySelector('.delete').onclick = function() {
              currentDeleteIndex = idx;
              confirmModal.style.display = 'flex';
            };
            historyList.appendChild(div);
          });
        }
        renderHistory();

        // Konfirmasi hapus
        confirmYes.addEventListener("click", function() {
          if (currentDeleteIndex !== null) {
            let history = JSON.parse(localStorage.getItem('qrHistory') || '[]');
            history.splice(currentDeleteIndex, 1);
            localStorage.setItem('qrHistory', JSON.stringify(history));
            renderHistory();
            confirmModal.style.display = 'none';
            currentDeleteIndex = null;
            showToast("QR Code berhasil dihapus!", true);
          }
        });

        confirmNo.addEventListener("click", function() {
          confirmModal.style.display = 'none';
          currentDeleteIndex = null;
        });

        // Helper functions
        function showError(message) {
          const oldToast = toast.textContent;
          toast.textContent = message;
          toast.style.backgroundColor = "var(--error-color)";
          toast.classList.add("show");

          setTimeout(() => {
            toast.classList.remove("show");
            setTimeout(() => {
              toast.textContent = oldToast;
              toast.style.backgroundColor = "var(--dark-color)";
            }, 300);
          }, 3000);
        }

        function showToast(message, isError = false) {
          toast.textContent = message;
          toast.style.backgroundColor = isError ? "var(--error-color)" : "var(--success-color)";
          toast.classList.add("show");

          setTimeout(() => {
            toast.classList.remove("show");
          }, 3000);
        }

        // Animation for input focus
        urlInput.addEventListener("focus", function () {
          document.querySelector(".input-group").style.boxShadow =
            "0 5px 20px rgba(67, 97, 238, 0.3)";
        });

        urlInput.addEventListener("blur", function () {
          document.querySelector(".input-group").style.boxShadow =
            "0 5px 15px rgba(0, 0, 0, 0.1)";
        });
      });
    </script>
  </body>
</html>
